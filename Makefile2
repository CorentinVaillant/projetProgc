# Compileur
CC = gcc
# Flags compileur 
CCFLAGS = -Wall -fsanitize=address

# Dossiers
FICHIERSRC1 = src1
FICHIERSRC2 = src2
FICHIERCOMPIL = compil

# Fichiers compile
SOURCES1 = $(patsubst %.c,$(FICHIERSRC1)/%.c,identite.c)
SOURCES2 = $(patsubst %.c,$(FICHIERSRC2)/%.c,testgenea.c genea.c)

# Fichier objet
OBJECTS = $(patsubst $(FICHIERSRC)/%.c,$(FICHIERCOMPIL)/%.o,$(SOURCES1) $(SOURCES2))
# Nom executable
EXECUTABLE = $(FICHIERCOMPIL)/testgenea


all: $(EXECUTABLE)


run : $(EXECUTABLE)
	@echo run $(EXECUTABLE)
	@./$(EXECUTABLE)


# cr√©ation des executables
$(EXECUTABLE): $(OBJECTS)
	@mkdir -p $(FICHIERCOMPIL)
	$(CC) $(CCFLAGS) $^ -o $@

# compilation des objets
$(FICHIERCOMPIL)/%.o: $(FICHIERSRC)/%.c
	@mkdir -p $(FICHIERCOMPIL)
	$(CC) $(CCFLAGS) -c $< -o $@

# nettoyage
clear:
	@rm -rf $(FICHIERCOMPIL) $(FICHIERCOMPIL)
